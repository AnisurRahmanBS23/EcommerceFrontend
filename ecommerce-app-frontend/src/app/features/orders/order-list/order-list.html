<div class="orders-container">
  <p-toast></p-toast>

  <!-- Header -->
  <div class="orders-header">
    <h1><i class="pi pi-shopping-bag"></i> My Orders</h1>
    <p class="subtitle">View and track your order history</p>
  </div>

  <!-- Empty State -->
  @if (!loading && orders.length === 0) {
  <div class="empty-orders">
    <i class="pi pi-inbox empty-icon"></i>
    <h2>No Orders Yet</h2>
    <p>You haven't placed any orders yet. Start shopping to see your orders here!</p>
    <button pButton type="button" label="Start Shopping" icon="pi pi-shopping-cart" class="p-button-lg"
      (click)="continueShopping()"></button>
  </div>
  }

  <!-- Orders Table -->
  @if (!loading && orders.length > 0) {
  <p-card>
    <p-table [value]="orders" [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} orders" [rowsPerPageOptions]="[10, 25, 50]"
      styleClass="p-datatable-orders">
      <ng-template pTemplate="header">
        <tr>
          <th>Order ID</th>
          <th>Date</th>
          <th>Items</th>
          <th>Total</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-order>
        <tr>
          <td>
            <span class="order-id">#{{ order.id.slice(0, 8) }}</span>
          </td>
          <td>
            <span class="order-date">{{ order.createdAt | date:'medium' }}</span>
          </td>
          <td>
            <span class="order-items">{{ getTotalItems(order) }} item(s)</span>
          </td>
          <td>
            <span class="order-total">à§³{{ order.totalAmount | number:'1.2-2' }}</span>
          </td>
          <td>
            <p-tag [value]="getStatusLabel(order.status)" [severity]="getStatusSeverity(order.status)"></p-tag>
          </td>
          <td>
            <button pButton type="button" label="View Details" icon="pi pi-eye" class="p-button-sm p-button-outlined"
              (click)="viewOrderDetail(order.id)"></button>
          </td>
        </tr>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="6" class="text-center">
            No orders found
          </td>
        </tr>
      </ng-template>
    </p-table>
  </p-card>
  }

  <!-- Loading State -->
  @if (loading) {
  <p-card>
    <div class="loading-container">
      @for (item of [1,2,3,4,5]; track item) {
      <div class="loading-row">
        <p-skeleton width="100%" height="3rem"></p-skeleton>
      </div>
      }
    </div>
  </p-card>
  }
</div>